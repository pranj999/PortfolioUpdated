{% load static %}

<style>
    /* Force navbar to stay on top of everything */
    #navbar {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 10000; /* Extremely high z-index */
        transition: all 0.3s ease;
    }

    /* Add space at the top of the page to account for the fixed navbar */
    body {
        padding-top: 70px; /* Adjust based on your navbar height */
    }
</style>

<div id="navbar" class="bg-transparent">
    <div class="container mx-auto px-4 sm:px-8 py-4 flex flex-wrap items-center justify-between">
        <!-- Logo and Heading -->
        <div class="flex items-center">
            <img src="{% static 'favicon1.png' %}" alt="Pranjal Patel Logo" class="w-6 h-6 rounded-md shadow-md hover:shadow-lg transition-all duration-300">
            <h1 class="font-semibold text-teal-400 text-xl hover:text-teal-300 transition-colors duration-300 ml-8">
                <a href="/" aria-label="Pranjal Patel Home Page">Pranjal Patel</a>
            </h1>
        </div>

        <!-- Navigation Links - Always Visible -->
        <div class="flex items-center flex-wrap justify-center space-x-2 sm:space-x-3 md:space-x-4 lg:space-x-6 py-2">
            <a href="/" class="relative text-teal-400 hover:text-teal-300 transition-colors duration-300 font-medium group py-2 px-1 text-sm sm:text-base" aria-current="page">Home
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-teal-400 group-hover:w-full transition-all duration-300"></span>
            </a>
            <a href="#about" class="relative text-teal-400 hover:text-teal-300 transition-colors duration-300 font-medium group py-2 px-1 text-sm sm:text-base">About
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-teal-400 group-hover:w-full transition-all duration-300"></span>
            </a>
            <a href="#experience" class="relative text-teal-400 hover:text-teal-300 transition-colors duration-300 font-medium group py-2 px-1 text-sm sm:text-base">Experience
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-teal-400 group-hover:w-full transition-all duration-300"></span>
            </a>
            <a href="#projects" class="relative text-teal-400 hover:text-teal-300 transition-colors duration-300 font-medium group py-2 px-1 text-sm sm:text-base">Projects
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-teal-400 group-hover:w-full transition-all duration-300"></span>
            </a>
            <a href="#education" class="relative text-teal-400 hover:text-teal-300 transition-colors duration-300 font-medium group py-2 px-1 text-sm sm:text-base">Education
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-teal-400 group-hover:w-full transition-all duration-300"></span>
            </a>
            <a href="#contact" class="relative text-teal-400 hover:text-teal-300 transition-colors duration-300 font-medium group py-2 px-1 text-sm sm:text-base">Contact
                <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-teal-400 group-hover:w-full transition-all duration-300"></span>
            </a>
            <a href="https://github.com/pranj999/pranj999/blob/main/Pranjal_Patel_Resume.pdf"
               target="_blank" rel="noopener noreferrer"
               class="ml-2 px-3 py-1.5 bg-gradient-to-r from-teal-500 to-blue-600 text-white font-medium rounded-full text-sm
                      transition-all duration-300 hover:shadow-lg hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500">
               <i class="fas fa-file-download mr-1"></i><span class="hidden sm:inline">Resume</span>
            </a>
        </div>
    </div>
</div>

<script>
    // Add background to navbar on scroll
    document.addEventListener('DOMContentLoaded', function() {
        const navbar = document.getElementById('navbar');

        function updateNavbar() {
            if (window.scrollY > 50) {
                navbar.classList.add('bg-gray-900', 'shadow-md');
                navbar.classList.remove('bg-transparent');
            } else {
                navbar.classList.remove('bg-gray-900', 'shadow-md');
                navbar.classList.add('bg-transparent');
            }
        }

        // Initial call to set correct state based on scroll position
        updateNavbar();

        // Add event listener for scroll
        window.addEventListener('scroll', updateNavbar);

        // Active link highlighting based on scroll position
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('#navbar a[href^="#"]');

        function highlightNavLink() {
            let scrollPosition = window.scrollY;

            // Add some offset to account for the navbar
            scrollPosition += 100;

            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.offsetHeight;
                const sectionId = section.getAttribute('id');

                if(scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
                    navLinks.forEach(link => {
                        link.classList.remove('text-white');
                        link.classList.add('text-teal-400');

                        if(link.getAttribute('href') === `#${sectionId}`) {
                            link.classList.add('text-white');
                            link.classList.remove('text-teal-400');
                        }
                    });
                }
            });
        }

        window.addEventListener('scroll', highlightNavLink);
    });
</script>